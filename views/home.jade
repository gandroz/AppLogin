extends layout

block content   
   link(type='text/css', rel='stylesheet', href='/css/backlog.css')    
   div.container-fluid(ng-app="appBacklog", ng-controller="backlogCtrl", ng-init="init()")
        div.container-fluid.spinnerWrapper#spinner(ng-hide="loaded")
        div.row-fluid(ng-show="loaded")          
           div.offset2.span9
              div.row-fluid   
                 button.btn.btn-primary(ng-click="showPanel();") Nouvelle tâche              
              div(collapse="isCollapsed")
                  div.span8.offset1.backlogPanel
                    form.formLog
                       input.input-block-level(type='text', placeholder='Title', ng-model="entry.title")
                       textarea.input-block-level(rows = 10, placeholder='Description de tâche', ng-model="entry.description")
                       select.input-block-level.optional(name='job.category', ng-model="entry.importance")
                          option(value="", disabled, selected) Importance
                          option 1
                          option 2
                          option 3
                          option 4
                       div.btn-toolbar
                          button.btn.btn-primary(ng-click="action()") {{buttonText}}
                          button.btn(ng-click="cancel()") Cancel
              div.searchInput
                 form.form-search
                    span Tri par importance : 
                    input.input-mini.search-query(type="text", ng-model="query") 
              div.span12                    
                 div.accordion.span8.offset1#accordionLog
                    div.accordion-group(ng-repeat="item in data.entries | filter:searchNotDone | orderBy:importance")
                       img.backlogCheckBox.pull-right(ng-src="{{item.done && '/img/OkGreen.png' || '/img/OkBlack.png'}}", ng-click="chgState(item)", ng-model="item.done")
                       a.btn.btn-mini.btn-danger.pull-right.buttonLog(ng:click="remove(item)") X
                       a.btn.btn-mini.btn-info.pull-right.buttonLog(ng:click="edit(item,$event)") ...                       
                       div.accordion-heading(ng-style="{backgroundColor: styles[item.importance-1].bkcolor, color: styles[item.importance-1].color}")                          
                          a.accordion-toogle(ng-style="{backgroundColor: styles[item.importance-1].bkcolor, color: styles[item.importance-1].color}", data-toggle="collapse", data-parent="#accordionLog", href="#collapse{{$index + 1}}") ({{item.importance}}) {{item.title}}                      
                       div.accordion-body.collapse(id="collapse{{$index+1}}")
                          div.accordion-inner                             
                             p {{item.description}}
              div.span12 
                 div.accordion.span8.offset1#accordionLog2
                    div.accordion-group(ng-repeat="item in data.entries | filter:searchDone | orderBy:importance")
                       img.backlogCheckBox.pull-right(ng-src="{{item.done && '/img/OkGreen.png' || '/img/OkBlack.png'}}", ng-click="chgState(item)")
                       a.btn.btn-mini.btn-danger.pull-right.buttonLog(ng:click="remove(item)") X
                       a.btn.btn-mini.btn-info.pull-right.buttonLog(ng:click="edit(item,$event)") ...                       
                       div.accordion-heading                          
                          a.accordion-toogle(data-toggle="collapse", data-parent="#accordionLog2", href="#collapseBis{{$index + 1}}") ({{item.importance}}) {{item.title}}                      
                       div.accordion-body.collapse(id="collapseBis{{$index+1}}")
                          div.accordion-inner                             
                             p {{item.description}}                
